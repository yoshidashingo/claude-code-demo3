# 初回実装の要求内容

## 概要

Devtask（開発者向けタスク管理CLIツール）のMVP（Minimum Viable Product）を実装する。
P0（必須）機能のみに絞り、基本的なタスク管理と優先度自動推定機能を実現する。

## 実装するMVP機能（P0）

### 1. プロジェクト初期化
- `devtask init [project-name]` コマンド
- `.devtask/` ディレクトリ作成
- `config.json` と `tasks.json` の初期化
- プロジェクト名の設定

### 2. タスク作成
- `devtask add <title>` コマンド
- オプション: `-d, --description`, `-p, --priority`, `-s, --status`, `--due`
- バリデーション（タイトル必須、1-200文字）
- UUID自動生成
- デフォルト値設定（status: todo, priority: medium）

### 3. タスク一覧表示
- `devtask list` コマンド
- テーブル形式での表示
- ステータス別グループ表示（オプション）
- カラーコーディング（ステータス、優先度）
- フィルタオプション: `--status`, `--priority`, `--search`

### 4. タスク詳細表示
- `devtask show <id>` コマンド
- すべてのフィールドを表示
- 作成日時・更新日時を表示

### 5. タスク編集
- `devtask edit <id>` コマンド
- オプションでフィールドを更新
- インタラクティブモード対応（オプションなしの場合）

### 6. タスク削除
- `devtask delete <id>` コマンド
- 確認プロンプト表示
- `-f, --force` で確認スキップ

### 7. ステータス変更
- `devtask status <id> <status>` コマンド
- エイリアス: `devtask start <id>`, `devtask done <id>`
- ステータス変更履歴の記録

### 8. 優先度変更
- `devtask priority <id> <priority>` コマンド
- high / medium / low

### 9. 優先度自動推定（差別化機能）
- `devtask list --auto-priority` で推定優先度を表示
- 推定アルゴリズム:
  - 期限スコア（50%）
  - ステータススコア（30%）
  - 経過時間スコア（20%）
- `[Auto: high]` のように表示

### 10. 統計情報
- `devtask stats` コマンド
- 総タスク数、完了タスク数、完了率
- ステータス別内訳、優先度別内訳

### 11. データ永続化
- `.devtask/tasks.json` にJSON形式で保存
- `.devtask/config.json` にプロジェクト設定を保存
- ファイルシステムエラーハンドリング

## 実装しない機能（P1以降）

- Git連携
- 期限管理の通知機能
- タグ機能
- データエクスポート/インポート
- チーム機能
- リモート同期

## 技術要件

### 必須ライブラリ
- `commander`: CLIフレームワーク
- `inquirer`: インタラクティブプロンプト
- `chalk`: カラー出力
- `cli-table3`: テーブル表示
- `date-fns`: 日付操作
- `uuid`: タスクID生成
- `fs-extra`: ファイル操作

### TypeScript設定
- `strict: true`
- `target: ES2022`
- `module: ESNext`

### ディレクトリ構造
```
src/
├── cli/
│   ├── index.ts
│   ├── commands/
│   └── ui/
├── services/
│   ├── TaskManager.ts
│   ├── PriorityEstimator.ts
│   └── FileStorage.ts
├── types/
├── utils/
└── constants/
```

## 受け入れ条件

### 機能面
- [ ] すべてのP0機能が動作する
- [ ] 優先度自動推定が正しく計算される
- [ ] データが `.devtask/` に永続化される
- [ ] エラーハンドリングが適切に行われる

### 品質面
- [ ] TypeScriptの型チェックが通る
- [ ] ESLintのチェックが通る
- [ ] コードが開発ガイドラインに準拠している

### UX面
- [ ] カラー出力が見やすい
- [ ] エラーメッセージが明確
- [ ] ヘルプメッセージが充実している

## 制約事項

- Node.js 18.x以上が必要
- プロジェクトディレクトリ内で実行する（グローバルタスクは未対応）
- 単一ユーザー想定（並行実行のロック機能なし）

## ユーザーストーリー（初回実装対象）

### US-001: プロジェクト初期化
プロジェクトで `devtask init` を実行すると、`.devtask/` ディレクトリが作成され、タスク管理が開始できる。

### US-002: タスク作成
`devtask add "バグ修正" -p high` でタスクを作成し、一覧に表示される。

### US-003: タスク一覧表示
`devtask list` でタスク一覧が見やすいテーブル形式で表示される。

### US-004: ステータス変更
`devtask start 1` でタスクを進行中に変更し、一覧での色が変わる。

### US-005: 優先度自動推定
`devtask list --auto-priority` で推定優先度が表示され、どのタスクに取り組むべきか判断できる。

### US-006: タスク完了
`devtask done 1` でタスクを完了にし、統計情報に反映される。

## スコープ外

以下は初回実装では対応しない：
- テストコードの作成（将来的に追加）
- ドキュメントの自動生成
- パフォーマンスチューニング（1000件のタスク対応）
- E2Eテスト

## 成功の定義

- MVP機能が完全に動作する
- 優先度自動推定が実用的な精度で動作する
- ユーザーが基本的なタスク管理をCLIで完結できる
- コードベースが今後の拡張に耐えうる構造になっている
